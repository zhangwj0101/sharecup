<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

	<include file="com/share/struts/index/struts.xml"></include>
	<include file="com/share/struts/platcenter/struts.xml"></include>
	<include file="com/share/struts/usercenter/struts.xml"></include>
	
	<constant name="struts.enable.DynamicMethodInvocation" value="false" />
	<constant name="struts.ognl.allowStaticMethodAccess" value="true"/>
	<constant name="struts.devMode" value="false" />
	<constant name="struts.i18n.encoding" value="UTF-8" />
	<constant name="struts.multipart.maxSize" value="1048576000" />
	
	<package name="default" namespace="/" extends="struts-default">
		<interceptors>
			<!-- 
			<interceptor name="security" class="com.share.util.SecurityInterceptor"></interceptor>
			 -->
			<interceptor-stack name="mydefault">  
                <interceptor-ref name="defaultStack" />  
                <!-- 
                <interceptor-ref name="security" />  
                 -->
            </interceptor-stack>  
		</interceptors>
		<global-results>
			<result>/forward.jsp</result>
			<result name="login">/WEB-INF/pages/commons/securityError.jsp</result>
			<result name="relogin">/WEB-INF/pages/commons/repeatlogin.jsp</result>
		</global-results>
	</package>
	
	<!-- 登录 -->
	<package name="loggin" namespace="/" extends="default">
		<action name="loggin" class="com.share.action.LogginAction">
			<result name="header_success">/WEB-INF/pages/index.jsp</result>
			<result name="plat_success">/WEB-INF/pages/platIndex.jsp</result>
			<result name="admin_success">/WEB-INF/pages/platIndex.jsp</result>
			<result name="error">/forward.jsp</result>
		</action>
		<action name="forward" class="com.share.action.LogginAction" method="forward">
			<result name="header_success">/WEB-INF/pages/index.jsp</result>
			<result name="plat_success">/WEB-INF/pages/platIndex.jsp</result>
			<result name="admin_success">/WEB-INF/pages/platIndex.jsp</result>
			<result name="error">/forward.jsp</result>
		</action>		
	</package>
	<!-- 退出 -->
	<package name="loggout" namespace="/" extends="default">
		<action name="loggout" class="com.share.action.LogginAction" method="loggout">
			<result>/forward.jsp</result>
		</action>
	</package>
	
	<package name="download" namespace="/" extends="default">
		<action name="download" class="com.share.action.DownloadAction" method="downpic">
		<interceptor-ref name="mydefault"></interceptor-ref>
		</action>
		
		<action name="resourceDownFTP" class="com.share.action.DownloadAction" method="resourceDownFTP">
		<interceptor-ref name="mydefault"></interceptor-ref>
		</action>		
		
		<action name="resourceDown" class="com.share.action.DownloadAction" method="resourceDown">
		<interceptor-ref name="mydefault"></interceptor-ref>
			<!-- 
			<interceptor-ref name="mydefault"></interceptor-ref>
			   设置文件名参数，由页面上传入 
            <param name="fileName"></param>   
           	<result name="success" type="stream">   
              下载文件类型定义
               <param name="contentType">text/plain</param>   
                下载文件处理方法
                <param name="contentDisposition">   
                   attachment;filename="${downloadChineseFileName}"                  
                </param>   
                下载文件输出流定义
                <param name="inputName">downloadFile</param>   
            </result> 
             -->  
		</action>
	
	</package>
	
	<package name="upload" namespace="/" extends="default">
		
		<action name="upload_*" class="com.share.action.UploadAction" method="{1}">
			<interceptor-ref name="mydefault"></interceptor-ref>
			<result name="work">/WEB-INF/pages/usercenter/workUpload.jsp</result>
			<result name="resource">/WEB-INF/pages/usercenter/resources.jsp</result>
		</action>
	</package>
	
	<!-- 注册 -->
	<package name="region" namespace="/" extends="default">
	<action name="region" class="com.share.action.RegionAction">
			<result type="redirect">/index/pages/regionOk.jsp</result>
	</action>
	<action name="region_*" class="com.share.action.RegionAction" method="{1}">
			<result>/WEB-INF/pages/usercenter/region.jsp</result>
	</action>
	</package>
	
	<!-- 修改密码 -->
	<package name="changePassword" namespace="/" extends="default">
		<action name="changePassword" class="com.share.action.UserCenterAction" method="changePassword">
			<interceptor-ref name="mydefault"></interceptor-ref>
			<result>/WEB-INF/pages/commons/reloggin.jsp</result>
			<result name="error">/WEB-INF/pages/usercenter/userSetting.jsp</result>
		</action>
	</package>
	
	
	<!-- 验证码 -->
	<package name="randpicture" extends="default">
		<action name="rand" class="com.share.action.RandomPictureAction">
			<result type="stream">
				<param name="contentType">image/jpeg</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
	</package>

	<!-- add 20130508 by mengcj -->
	<package name="dlresource" extends="default">
		<action name="list" class="com.share.action.DLResourceAction" method="list">
		</action>
		<action name="upload" class="com.share.action.DLResourceAction" method="upload">
		</action>
		<action name="download" class="com.share.action.DLResourceAction" method="download">
		</action>				
	</package>	
	
	<!-- add 20130509 by wj -->
	<package name="news" namespace="/" extends="default">
		<action name="getNews" class="com.share.action.NewsAction" method="getNews">
		</action>
		<action name="getNewsById" class="com.share.action.NewsAction" method="getNewsById">
			<result name="success">/index/pages/newsContent.jsp</result>
		</action>
		<action name="updateNews" class="com.share.action.NewsAction" method="updateNews">
			<result type="redirectAction">
			    <param name="actionName">getNews</param>
                <param name="namespace">/</param>
            </result>
		</action>
		<action name="deleteteNews" class="com.share.action.NewsAction" method="deleteNews">				
			<result type="redirectAction">
			    <param name="actionName">getNews</param>
                <param name="namespace">/</param>
            </result>
		</action>
		<action name="ckeditorUpload" class="com.share.action.UploadAction_json" method="uploadFile_json">
		</action>
	</package>
	<package name="qa" namespace="/" extends="default">
		<action name="updateQa" class="com.share.action.QaAction" method="updateQa">
			<result name="success">/forward.jsp</result>
		</action>
	</package>
</struts>
